<!DOCTYPE html>
<html>
<head>
  <title>Product Research â€” DropStacker Pro</title>
  <link rel="stylesheet" href="../styles/main.css">
  <script src="../scripts/auth.js" defer></script>
</head>

<body>

<!-- TOP NAV -->
<div style="padding:20px;background:#111;">
  <a href="../dashboard.html">ğŸ  Dashboard</a> |
  <a href="../pricing.html">ğŸ’² Pricing</a> |
  <a href="javascript:history.back()">ğŸ”™ Back</a>
</div>

<div style="max-width:800px;margin:50px auto;background:#111;padding:40px;border-radius:12px;">

  <h1>ğŸ” Product Research</h1>
  <p><strong>How to use:</strong> Enter a product keyword to estimate demand, competition, and profit potential.</p>

  <input id="keyword" placeholder="e.g. belts, pet toys, phone mounts">
  <button onclick="analyze()">Analyze Market</button>

  <div id="results" style="margin-top:30px;display:none;">
    <div id="output"></div>
  </div>
</div>

<script>
  function hashScore(str, min, max) {
    let hash = 0;
    for (let i = 0; i < str.length; i++) {
      hash = str.charCodeAt(i) + ((hash << 5) - hash);
    }
    return Math.abs(hash % (max - min)) + min;
  }

  function analyze() {
    const keyword = document.getElementById("keyword").value.trim().toLowerCase();
    if (!keyword) return alert("Enter a keyword");

    const isOwner = localStorage.getItem("owner") === "true";
    const plan = localStorage.getItem("plan") || "free";

    const demand = hashScore(keyword, 60, 95);
    const profit = hashScore(keyword + "profit", 50, 90);
    const competition = hashScore(keyword + "comp", 20, 80);

    let html = `
      ğŸ“ˆ Demand Score: <strong>${demand}/100</strong><br>
      ğŸ’° Profit Potential: <strong>${profit}/100</strong><br>
    `;

    if (plan === "pro" || isOwner) {
      html += `âš”ï¸ Competition Level: <strong>${competition < 40 ? "Low" : competition < 70 ? "Medium" : "High"}</strong>`;
    } else {
      html += `<br><strong>ğŸ”’ Pro required for full analysis</strong><br>
               <a href="../pricing.html">Upgrade to Pro</a>`;
    }

    document.getElementById("output").innerHTML = html;
    document.getElementById("results").style.display = "block";
  }
</script>

</body>
</html>
